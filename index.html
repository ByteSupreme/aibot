<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title data-translate-key="app_title">Lusty Chat Bot</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body class="dark">

    <div class="app-container">

        <header class="app-header">
            <div class="header-content-wrapper">
                <div class="gem-bar-container-outer" id="gem-bar-container-outer">
                     <!-- Gem bar will be injected here by script.js -->
                </div>
                 <!-- Admin Panel Link Placeholder - Populated by script.js if user is admin -->
                <div id="admin-panel-link-container" style="margin-left: 10px;"></div>
            </div>
        </header>

        <!-- === View Containers === -->
        <div id="characters-view" class="view-container active-view">
            <h1 class="screen-main-title" data-translate-key="characters_view_title">Characters</h1>
            <div class="character-grid" id="character-grid">
                <!-- Character cards will be injected here by script.js -->
            </div>
        </div>

        <div id="users-characters-view" class="view-container">
            <div class="users-characters-header">
                <h1 class="screen-main-title" data-translate-key="community_view_title">Community</h1>
                <button class="action-button stylish-button" id="my-characters-btn" data-translate-key="my_creations_btn">My Creations</button>
            </div>
            <div class="search-bar-container">
                <input type="search" id="users-character-search-input" data-translate-key-placeholder="search_characters_placeholder" placeholder="Search characters...">
            </div>
            <div class="tabs-container">
                <button class="tab-button active" data-tab="featured" data-translate-key="featured_tab">Featured</button>
                <button class="tab-button" data-tab="recent" data-translate-key="recent_tab">Recent</button>
            </div>
            <div class="character-grid" id="public-character-grid">
                <!-- Public user-created character cards will be injected here -->
            </div>
            <p class="empty-state-message" id="no-public-characters-message" style="display:none;" data-translate-key="no_public_characters_message">No characters found. Try a different tab or search.</p>
        </div>

        <div id="my-characters-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="my_creations_view_title">My Creations</h1>
            <p class="view-description" data-translate-key="my_creations_description">Manage and refine your own unique characters.</p>
            <div class="my-character-list" id="my-character-list">
                <!-- User's own character cards will be injected here -->
            </div>
             <p class="empty-state-message" id="no-my-characters-message" style="display:none;" data-translate-key-html="no_my_characters_message_html">You haven't created any characters yet. <a href="#" id="create-first-character-link" data-translate-key="create_first_character_link">Bring your first character to life!</a></p>
        </div>

        <div id="character-detail-view" class="view-container">
            <div class="character-detail-image-container">
                <img id="char-detail-image" src="https://placehold.co/600x800/333/fff?text=Character" alt="Character Image">
            </div>
            <h1 id="char-detail-name" class="screen-main-title char-detail-title">Character Name</h1>
            <div class="char-detail-content">
                <p class="char-detail-section-title" data-translate-key="character_detail_summary">Summary</p>
                <p id="char-detail-desc" class="char-detail-text">Short description goes here.</p>
                <div id="char-detail-full-details-section" style="display:none;">
                    <p class="char-detail-section-title" data-translate-key="character_detail_full_details">Full Details</p>
                    <p id="char-detail-full-details" class="char-detail-text full-details-text"></p>
                </div>
            </div>
             <!-- Creator Info Section Placeholder -->
            <div id="char-detail-creator-info-section" class="char-detail-content" style="display:none;">
                <p class="char-detail-section-title" data-translate-key="char_detail_creator_label">Creator Information</p>
                <div class="creator-info-item">
                    <span class="creator-info-label" data-translate-key="char_detail_creator_label">Creator:</span>
                    <span class="creator-info-value" id="char-detail-creator-username">N/A</span>
                </div>
                <div class="creator-info-item">
                     <span class="creator-info-label" data-translate-key="char_detail_created_date_label">Character Created:</span>
                    <span class="creator-info-value" id="char-detail-creator-char-created-date">N/A</span>
                </div>
                 <div class="creator-info-item">
                    <span class="creator-info-label">User Joined:</span> <!-- Example, add to translations.json if needed -->
                    <span class="creator-info-value" id="char-detail-creator-user-joined-date">N/A</span>
                </div>
            </div>
            <button class="upgrade-button-large stylish-button" id="start-character-btn" data-translate-key="start_character_btn">Start Character</button>
        </div>


        <div id="settings-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="settings_view_title">Settings</h1>
            <div class="settings-section">
                <div class="settings-item-header" data-translate-key="settings_plan_header">Your plan</div>
                <div class="settings-plan-card">
                    <span data-translate-key="settings_free_user_plan">Free</span> <!-- Default, updated by script.js -->
                    <button class="upgrade-button small-button" id="settings-upgrade-plan-btn" data-translate-key="settings_upgrade_btn">Upgrade</button>
                </div>
            </div>
            <div class="settings-section">
                 <div class="settings-item-header" data-translate-key="settings_style_header">Style</div>
                 <div class="style-toggle-container">
                    <img src="https://placehold.co/350x180/2A203C/E0E0E0/png?text=Realistic+Style&font=roboto" alt="Style Realistic" id="style-realistic" class="style-image active">
                    <img src="https://placehold.co/350x180/3A2F4B/E0E0E0/png?text=Anime+Style&font=roboto" alt="Style Anime" id="style-anime" class="style-image">
                    <div class="style-toggle-labels">
                        <div class="style-label realistic active">
                            <span class="checkbox-custom checked"></span><span data-translate-key="settings_style_realistic">Realistic</span>
                        </div>
                        <div class="style-label anime">
                            <span class="checkbox-custom"></span><span data-translate-key="settings_style_anime">Anime</span>
                        </div>
                    </div>
                 </div>
            </div>
            <div class="settings-section">
                <div class="settings-item-header" data-translate-key="settings_language_header">Language</div>
                <div class="settings-item-action" id="settings-language-btn">
                    <span id="current-language-display">English</span> <!-- Updated by script.js -->
                    <span>></span>
                </div>
            </div>
            <div class="settings-spacer"></div> <!-- Used for layout if needed -->
        </div>

        <div id="create-character-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="create_character_view_title">Create Character</h1>
            <div class="form-section">
                <label for="char-name" data-translate-key="char_form_name_label">Name:</label>
                <input type="text" id="char-name" name="char-name" data-translate-key-placeholder="char_form_name_placeholder" placeholder="E.g., Alex Ryder">
            </div>
            <div class="form-section">
                <label for="char-desc" data-translate-key="char_form_desc_label">Short Description (appears on card):</label>
                <textarea id="char-desc" name="char-desc" rows="3" data-translate-key-placeholder="char_form_desc_placeholder" placeholder="E.g., A curious adventurer..."></textarea>
            </div>
            <div class="form-section">
                <label for="char-details" data-translate-key="char_form_details_label">Full Character Details (background, personality, etc.):</label>
                <textarea id="char-details" name="char-details" rows="6" data-translate-key-placeholder="char_form_details_placeholder" placeholder="Elaborate on your character's story, traits, and motivations..."></textarea>
            </div>
            <div class="form-section">
                <label for="char-image" data-translate-key="char_form_image_label">Image URL (Optional):</label>
                <input type="url" id="char-image" name="char-image" data-translate-key-placeholder="char_form_image_placeholder" placeholder="https://example.com/image.png">
            </div>
            <div class="form-section">
                <label data-translate-key="char_form_visibility_label">Visibility:</label>
                <div class="segmented-control" id="char-visibility-segment">
                    <button class="segment-button active" data-value="public" data-translate-key="char_form_visibility_public">Public</button>
                    <button class="segment-button" data-value="private" data-translate-key="char_form_visibility_private">Private</button>
                </div>
            </div>
            <p class="creation-cost-note" id="creation-cost-note-text" data-translate-key-html="char_form_creation_cost_note" data-translate-var-cost="15">Cost: <span id="create-char-cost-gems">15</span> <span class="gem-currency-icon">üíé</span> per character</p>
            <button class="upgrade-button-large stylish-button" id="save-character-btn" data-translate-key-html="char_form_create_character_btn" data-translate-var-cost="15">Create Character (<span id="create-char-cost-btn-gems">15</span> <span class="gem-currency-icon">üíé</span>)</button>
        </div>

        <div id="edit-character-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="edit_character_view_title">Edit Character</h1>
            <input type="hidden" id="editing-char-id">
            <div class="form-section">
                <label for="edit-char-name" data-translate-key="char_form_name_label">Name:</label>
                <input type="text" id="edit-char-name" name="edit-char-name" data-translate-key-placeholder="char_form_name_placeholder" placeholder="E.g., Alex Ryder">
            </div>
            <div class="form-section">
                <label for="edit-char-desc" data-translate-key="char_form_desc_label">Short Description (appears on card):</label>
                <textarea id="edit-char-desc" name="edit-char-desc" rows="3" data-translate-key-placeholder="char_form_desc_placeholder" placeholder="E.g., A curious adventurer..."></textarea>
            </div>
            <div class="form-section">
                <label for="edit-char-details" data-translate-key="char_form_details_label">Full Character Details (background, personality, etc.):</label>
                <textarea id="edit-char-details" name="edit-char-details" rows="6" data-translate-key-placeholder="char_form_details_placeholder" placeholder="Elaborate on your character's story, traits, and motivations..."></textarea>
            </div>
            <div class="form-section">
                <label for="edit-char-image" data-translate-key="char_form_image_label">Image URL (Optional):</label>
                <input type="url" id="edit-char-image" name="edit-char-image" data-translate-key-placeholder="char_form_image_placeholder" placeholder="https://example.com/image.png">
            </div>
            <div class="form-section">
                <label data-translate-key="char_form_visibility_label">Visibility:</label>
                <div class="segmented-control" id="edit-char-visibility-segment">
                    <button class="segment-button active" data-value="public" data-translate-key="char_form_visibility_public">Public</button>
                    <button class="segment-button" data-value="private" data-translate-key="char_form_visibility_private">Private</button>
                </div>
            </div>
            <button class="upgrade-button-large stylish-button" id="save-edited-character-btn" data-translate-key="char_form_save_changes_btn">Save Changes</button>
        </div>

        <div id="recharge-energy-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="recharge_energy_view_title">Recharge Energy</h1>
            <div class="form-section">
                <label for="energy-amount" data-translate-key="recharge_energy_desired_amount_label">Desired Energy Amount:</label>
                <input type="number" id="energy-amount" name="energy-amount" data-translate-key-placeholder="recharge_energy_amount_placeholder" placeholder="e.g., 100" min="1" value="100">
            </div>
            <div class="form-section">
                <p id="estimated-energy-stars-text" data-translate-key-html="recharge_energy_cost_in_stars" data-translate-var-cost="?">Cost in Stars: <span id="estimated-energy-stars">?</span> <span class="telegram-star">‚≠ê</span></p>
            </div>
            <button class="upgrade-button-large stylish-button" id="confirm-recharge-btn" data-translate-key="recharge_energy_proceed_btn">Proceed to Recharge with Stars</button>
        </div>

        <div id="plan-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="plan_view_title">Subscription Plans</h1>
            <div id="plan-options-container">
                <div class="plan-option selected" data-plan-id="placeholder_1m" data-gems-bonus="0" data-stars-cost="0">
                    <div>
                        <div class="plan-title" data-translate-key="plan_loading_text">Loading Plan...</div>
                        <div class="plan-price"> <span class="plan-period"></span></div>
                    </div>
                    <span class="radio-custom checked"></span>
                </div>
            </div>
            <ul class="plan-features" id="plan-features-list">
                <li data-translate-key="plan_features_loading_text">Loading features...</li>
            </ul>
            <button class="upgrade-button-large stylish-button" id="plan-upgrade-btn" data-translate-key="plan_upgrade_btn_text">Upgrade üíé</button>
        </div>

        <div id="payment-subscription-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="payment_view_title">Payment Method</h1>
            <div class="payment-summary-card">
                <img src="https://placehold.co/80x80/7E57C2/FFFFFF/png?text=LCB&font=roboto" alt="Lusty Chat Bot" class="payment-avatar">
                <div class="payment-description">
                    <div data-translate-key="payment_sub_purchasing_text">Purchasing a subscription</div>
                    <div class="payment-plan-details" id="payment-sub-plan-details" data-translate-key="payment_sub_default_plan_details">Plan Details</div>
                    <div class="payment-bot-name" data-translate-key="payment_bot_name_default">Lusty Chat Bot</div>
                </div>
                <div class="payment-total" id="payment-sub-total-stars">
                     0 <span class="telegram-star">‚≠ê</span>
                </div>
            </div>
            <div class="payment-method-option selected">
                <span><span class="telegram-star blue">‚≠ê</span> <span data-translate-key="payment_stars_method_text">Telegram Stars</span></span>
                <span class="radio-custom checked purple"></span>
            </div>
            <div class="payment-secure-note">
                <span class="info-icon">‚ìò</span> <span data-translate-key="payment_secure_note">All payments are anonymous and secure</span>
            </div>
            <button class="upgrade-button-large stylish-button" id="payment-sub-confirm-btn" data-translate-key="plan_upgrade_btn_text">Upgrade üíé</button>
        </div>

        <div id="language-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="language_view_title">Language</h1>
            <div class="language-option" data-lang="en" data-lang-name="English">
                English <span class="language-native">English</span>
                <span class="radio-custom"></span>
            </div>
            <div class="language-option" data-lang="ru" data-lang-name="–†—É—Å—Å–∫–∏–π">
                –†—É—Å—Å–∫–∏–π <span class="language-native">–†—É—Å—Å–∫–∏–π</span>
                <span class="radio-custom"></span>
            </div>
             <div class="language-option" data-lang="fr" data-lang-name="Fran√ßais">
                Fran√ßais <span class="language-native">Fran√ßais</span>
                <span class="radio-custom"></span>
            </div>
            <div class="language-option" data-lang="it" data-lang-name="Italiano">
                Italiano <span class="language-native">Italiano</span>
                <span class="radio-custom"></span>
            </div>
            <div class="language-option" data-lang="de" data-lang-name="Deutsch">
                Deutsch <span class="language-native">Deutsch</span>
                <span class="radio-custom"></span>
            </div>
             <div class="language-option" data-lang="es" data-lang-name="Espa√±ol">
                Espa√±ol <span class="language-native">Espa√±ol</span>
                <span class="radio-custom"></span>
            </div>
        </div>

        <div id="store-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="store_view_title">Store</h1>
            <div class="store-unlimited-energy">
                <img src="https://placehold.co/100x100/FFC107/333333/png?text=Chest&font=roboto" alt="Unlimited Energy Chest" class="store-energy-chest">
                <div class="store-energy-info">
                    <h3 data-translate-key="store_unlimited_energy_title">Unlimited Energy</h3>
                    <p data-translate-key="store_unlimited_energy_desc">Remove the barriers. Gain endless energy!</p>
                </div>
                <button class="recharge-button stylish-button" id="recharge-energy-btn" data-translate-key="store_view_options_btn">View Options</button>
            </div>
            <div class="store-gem-grid" id="store-gem-grid-container">
            </div>
        </div>

        <div id="payment-item-view" class="view-container">
            <h1 class="screen-main-title" data-translate-key="payment_view_title">Payment Method</h1>
            <div class="payment-summary-card">
                 <img src="https://placehold.co/80x80/4FC3F7/FFFFFF/png?text=Item&font=roboto" alt="Item Pack" id="payment-item-avatar" class="payment-avatar">
                <div class="payment-description">
                    <div id="payment-item-purchase-title" data-translate-key="payment_item_purchasing_text">Purchasing an item</div>
                    <div class="payment-plan-details" id="payment-item-details" data-translate-key="payment_item_default_details">Item Details</div>
                    <div class="payment-bot-name" data-translate-key="payment_bot_name_default">Lusty Chat Bot</div>
                </div>
                <div class="payment-total" id="payment-item-total-stars">
                     0 <span class="telegram-star">‚≠ê</span>
                </div>
            </div>
            <div class="payment-method-option selected">
                 <span><span class="telegram-star blue">‚≠ê</span> <span data-translate-key="payment_stars_method_text">Telegram Stars</span></span>
                <span class="radio-custom checked purple"></span>
            </div>
            <div class="payment-secure-note">
                <span class="info-icon">‚ìò</span> <span data-translate-key="payment_secure_note">All payments are anonymous and secure</span>
            </div>
            <button class="upgrade-button-large stylish-button" id="payment-item-confirm-btn" data-translate-key="payment_pay_with_stars_btn">Pay with Stars</button>
        </div>

        <nav class="bottom-nav" id="bottom-nav-bar" style="display: none;">
            <button class="bottom-nav-item active" data-view="characters-view" data-translate-key-aria-label="nav_featured_characters" aria-label="Featured Characters">
                <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>
            </button>
            <button class="bottom-nav-item" data-view="users-characters-view" data-translate-key-aria-label="nav_community_characters" aria-label="Community Characters">
                <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"></path></svg>
            </button>
            <button class="bottom-nav-item" data-view="create-character-view" data-translate-key-aria-label="nav_create_character" aria-label="Create Character">
                <svg viewBox="0 0 24 24" fill="currentColor" width="30" height="30"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>
            </button>
            <button class="bottom-nav-item" data-view="settings-view" data-translate-key-aria-label="nav_settings" aria-label="Settings">
                <svg viewBox="0 0 24 24" fill="currentColor" width="26" height="26"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l-.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l-.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></svg>
            </button>
        </nav>
    </div>

    <script src="script.js"></script>
</body>
</html>
